<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
      .marker {
        background-image: url('the_method.png');
        background-size: cover;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
    }  
    .mapboxgl-popup {
    max-width: 200px;
    }

    .mapboxgl-popup-content {
    text-align: center;
    font-family: 'Open Sans', sans-serif;
    }


    </style>
</head>

<body>
    <nav class="navbar navbar-dark bg-primary">
        <a class="navbar-brand" href="#">Stickerio</a>
        <div>
            <ul class="navbar-nav mr-auto flex-row">
                <li class="nav-item px-3">
                    <a class="nav-link" href="dashboard.html">Dashboard</a>
                </li>
                <li class="nav-item px-3">
                    <a class="nav-link" href="community.html">Community Page</a>
                </li>
                <li class="nav-item px-3">
                    <a class="nav-link" href="redeem.html">Redeem</a>
                </li>
                <li class="nav-item px-3">
                    <a class="nav-link active" href="map.html">Map</a>
                </li>
                <li class="nav-item px-3">
                    <a class="nav-link" href="sticker.html">Stickers</a>
                </li>
                <li class="nav-item px-3">
                    <a class="nav-link" id="signout" href="#">Sign out</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container-fluid">
        <div id='map' style='width: 1200px; height: 800px;'></div>
    </div>
    <script src="../scripts/key.js"></script>
    <script>

    // TO MAKE THE MAP APPEAR YOU MUST
    // ADD YOUR ACCESS TOKEN FROM
    // https://account.mapbox.com
    mapboxgl.accessToken = getToken();
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/outdoors-v11', // stylesheet location
        center: [-82.998554, 39.961528], // starting position [lng, lat]
        zoom: 10 // starting zoom
    });

    var geojson = {
            type: 'FeatureCollection',
            features: [{
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-82.999080,39.961339]
            },
            properties: {
                title: 'Sticker Location',
                description: 'Ohio State House',
                place: 'none'
            }
        },
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-83.007007,39.959672]
            },
            properties: {
                title: 'Sticker Location',
                description: 'COSI',
                place: 'recreational',
            }
        },
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-83.013908,39.999397]
            },
            properties: {
                title: 'Sticker Location',
                description: 'OSU Oval',
                place: 'parks',
            }
        },
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-83.012948,40.004946]
            },
            properties: {
                title: 'Sticker Location',
                description: 'Tom W. Davis Clocktower',
                place: 'recreational'
            }
        },
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-82.884998,39.998088]
            },
            properties: {
                title: 'Sticker Location',
                description: 'John Glenn Columbus Airport',
                place: 'none',
            }
        },
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-83.123619,40.084969]
            },
            properties: {
                title: 'Sticker Location',
                description: 'Field of Corn',
                place: 'parks',
            }
        },        
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-83.107651,40.099034]
            },
            properties: {
                title: 'Sticker Location',
                description: `Wendy's HQ`,
                place: 'restaurants',
            }
        }, 
    ]
    };
    // add markers to map
    geojson.features.forEach(function(marker) {

    // create a HTML element for each feature
    var el = document.createElement('div');
    el.className = 'marker';

    // make a marker for each feature and add to the map
    new mapboxgl.Marker(el)
    .setLngLat(marker.geometry.coordinates)
    .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
    .setHTML('<h3>' + marker.properties.title + '</h3><p>' + marker.properties.description + '</p></p>Type: ' + marker.properties.place + '</p>'))
    .addTo(map);
    });

    </script>
    
    <script defer src="/__/firebase/8.0.2/firebase-app.js"></script>
    <script defer src="/__/firebase/8.0.2/firebase-auth.js"></script>
    <script defer src="/__/firebase/8.0.2/firebase-firestore.js"></script>
    <script defer src="/__/firebase/init.js"></script>
    <script defer src="../scripts/signOut.js"></script>

</body>

</html>